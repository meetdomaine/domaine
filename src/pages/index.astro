---
import { sanityClient } from "sanity:client";
import HomeHero from "../components/domaine/sections/home/home-Hero.astro";
import GlobalSections from "../components/global/sections/section-GlobalSections.astro";
import LayoutDomaine from "../layouts/Layout-Domaine.astro";
import { globalSectionsFields, imageFields, videoFields } from "../components/global/utils/cms-queries"
import AtomPixelBorder from "../components/global/atoms/atom-pixelBorder.astro";

const pageSettings = await sanityClient.fetch(`*[_type == "page_home-domaine"][0]{ ...,  globalSections{ ${globalSectionsFields} }, media{ ..., ${imageFields}, ${videoFields} } }`)

// const pageSettings = await sanityClient.fetch(`*[_type == "page_projects-index" && _id == "page_projects-index-studio"][0]`)
// console.log(pageSettings.globalSections)
---
<LayoutDomaine
    theme="dark"
    title="Home"
    searchFilter="type:page"
>
    <HomeHero
        heading={pageSettings.heading}
        subheading={pageSettings.subheading}
        button={pageSettings.button}
        media={pageSettings.media}
        heroTextColor = {pageSettings.heroTextColor}
    />
    <!-- <AtomPixelBorder /> -->
    {pageSettings.globalSections && pageSettings.globalSections.sections.map((section) => (
        <GlobalSections brand="domaine" section={section} />
    ))}
</LayoutDomaine>