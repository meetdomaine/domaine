---
import LayoutStudioBlogIndex from '../../../layouts/Layout-Studio_BlogIndex.astro';
import { urlFor } from '../../../components/global/utils/cms-queries';
import { getCollection } from 'astro:content';
import { getEntry } from 'astro:content';

const pageSettings = await getEntry('pageSettings_Domaine', 'page_blog-index-studio')
const blogPosts = await getCollection('blogPosts_Studio')
---
<LayoutStudioBlogIndex
    title={`${pageSettings.data.metafields?.title ? pageSettings.data.metafields.title : pageSettings.data.title} | Insights`}
    description={pageSettings.data.metafields?.description ? pageSettings.data.metafields.description : null}
    image={pageSettings.data.metafields?.image ? urlFor(pageSettings.data.metafields.image).url() : null}
    pageSettings={pageSettings.data}
    blogPosts={blogPosts}
    heading={pageSettings.data.title}
    subheading={pageSettings.data.heading}
    searchFilter="type:page"
    showPreloader={false}
>
</LayoutStudioBlogIndex>