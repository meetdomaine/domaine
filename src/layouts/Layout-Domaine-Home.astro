---
import HomeHero from "../components/domaine/sections/home/home-Hero.astro";
import GlobalSections from "../components/global/sections/section-GlobalSections.astro";
import LayoutDomaine from "../layouts/Layout-Domaine.astro";
import { urlFor, globalSectionsFields, imageFields, videoFields, imageBaseFields, projectGridFields } from "../lib/cms-queries"
import { getTranslationString } from "../lib/translations";
import { Brands } from "../enums/brands";
import { loadQuery } from "../lib/sanity-load-query";

const { locale, content } = Astro.props;
---
<LayoutDomaine
    noIndex={content?.metafields?.noIndex === true}
    title={content?.metafields?.title ? getTranslationString(content.metafields.title, locale) : null}
    description={content?.metafields?.description ? getTranslationString(content.metafields.description, locale) : null}
    image={content?.metafields?.image ? urlFor(content.metafields.image).url() : null}
    searchExposed={true}
    showPreloader={content?.showPreloader}
    locale={locale}
>
    <HomeHero
        locale={locale}
        eyebrow={getTranslationString(content?.eyebrow, locale)}
        heading={getTranslationString(content?.heading, locale)}
        button={content?.button}
        media={content?.media}
        heroTextColor={content?.heroTextColor}
        brand={Brands.DOMAINE}
    />
    {content?.globalSections && content?.globalSections.sections.map((section, i) => (
        <GlobalSections 
          brand={Brands.DOMAINE}
          locale={locale}
          section={section}
          key={i} 
        />
    ))}
</LayoutDomaine>