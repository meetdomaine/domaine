---
import LayoutDomaine from "../layouts/Layout-Domaine.astro";
import ServicesHero from "../components/domaine/sections/services/services-Hero.astro";
import GlobalSections from "../components/global/sections/section-GlobalSections.astro";
import { urlFor } from "../lib/cms-queries";
import { getEntry } from "astro:content";

const { data: pageSettings } = await getEntry('pageSettings_Domaine', 'page_services-index-domaine')
const { content, locale } = Astro.props
---
<LayoutDomaine
    title={`${pageSettings.metafields?.title ? pageSettings.metafields.title : pageSettings.title}`}
    description={pageSettings.metafields?.description ? pageSettings.metafields.description : null}
    image={pageSettings.metafields?.image ? urlFor(pageSettings.metafields.image).url() : null}
    searchFilter="type:page"
    activePath="/services"
    showPreloader={false}
    locale={locale}
>   
    <ServicesHero
        title={pageSettings.title}
        heading={pageSettings.heading}
        locale={locale}
    />

    {pageSettings.sections && pageSettings.sections.map((section, i) => (
        <GlobalSections brand="domaine" section={section} key={i} locale={locale} />
    ))}

    <!-- <SectionForm 
        heading={pageSettings.formHeading}
        text={pageSettings.formText}
        hubspotFormId={pageSettings.hubspotFormId}
    /> -->

</LayoutDomaine>