---
import LayoutStudio from "../layouts/Layout-Studio.astro";
import HomeHero from "../components/studio/sections/home/home-Hero.astro";
import GlobalSectionsList from "../components/global/sections/section-GlobalSectionsList.astro";
import { getTranslationString } from "../lib/translations";
import { urlFor } from "../lib/cms-queries";
import { loadQuery } from "../lib/sanity-load-query";
import { imageFields, videoFields, imageBaseFields } from "../lib/cms-queries";

const { locale } = Astro.props
const { data: content } = await loadQuery({
  query: `*[_type == "page_home-studio"][0]{
    media{ ..., ${imageFields}, ${videoFields} },
    metafields{ title, description, image{${imageBaseFields}} },
    showPreloader
  }`
})
---
<LayoutStudio
    title={content.metafields?.title ? getTranslationString(content.metafields.title, locale) : null}
    description={content.metafields?.description ? getTranslationString(content.metafields.description, locale) : null}
    image={content.metafields?.image ? urlFor(content.metafields.image).url() : null}
    locale={locale}
    theme="dark"
    searchExposed={true}
    showPreloader={content.showPreloader}
>
    <HomeHero 
        eyebrow={content.eyebrow}
        heading={content.heading}
        subheading={content.subheading}
        button={content.button}
        textColor={content.heroTextColor}
        projects={content.projects}
        locale={locale}
    />

    <GlobalSectionsList brand="studio" locale={locale} />

</LayoutStudio>