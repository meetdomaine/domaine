---
import type { SanityAsset } from '@sanity/image-url/lib/types/types';
import { urlFor } from '../utils/cms-queries';
import AtomSanityImage from './atom_sanityImage.astro';

interface Props {
  // isVideo?: boolean,
  video?: {
    asset: {
      playbackId: string,
      filename: string,
    }
  },
  videoWidth?: string,
  videoHeight?: string,
  image?: { 
    asset: {
      _id: 'string',
      metadata: {
        dimensions: {
          width: number,
          height: number,
          aspectRatio: number,
        },
        blurHash: string,
        lqip: string,
      }
    },
    crop: {
      top: number,
      right: number,
      bottom: number,
      left: number
    },
    alt: string
  },
  sizes: string,
  cover?: boolean,
  eager?: boolean,
  aspectRatio?: number,
  alt?: string,
  transitionName?: string,
}

const { video, image, sizes, eager, aspectRatio, cover, alt, videoWidth, videoHeight, transitionName } = Astro.props;
// console.log(video)
---


{video ? 
    <mux-player
        playback-id={video.asset.playbackId}
        metadata-video-title={video.asset.filename}
        autoplay
        loop
        muted
        style={{ aspectRatio: aspectRatio }}
        width={videoWidth}
        height={videoHeight}
    ></mux-player>
    :
    <AtomSanityImage 
        image={image}
        sizes={sizes}
        eager={eager}
        aspectRatio={aspectRatio}
        cover={cover}
        alt={alt}
    />
}

<style>
    mux-player {
      --media-object-fit: cover;
      --media-object-position: center;
      --controls: none;
      --dialog: none;
      --loading-indicator: none;
      /* object-fit: cover; */
    }

</style>